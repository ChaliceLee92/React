<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>


    <!-- ä½¿ç”¨ PropTypes è¿›è¡Œç±»å‹æ£€æŸ¥ -->
    <script src="https://cdn.bootcss.com/prop-types/15.7.2/prop-types.js"></script>


    <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>


    <title>React ç»„ä»¶çš„åŸºæœ¬å®šä¹‰ä¸ä½¿ç”¨</title>
</head>

<body>
    <div id="root"></div>
    <div id="root1"></div>
    <div id="root2"></div>
    <div id="root3"></div>
    <div id="root4"></div>
    <div id="root5"></div>
</body>

</html>
<script type="text/babel">

    /**
        ç»„ä»¶çš„ä¸‰å¤§å±æ€§ï¼š
                        1ã€state:
                                    State æ˜¯ç»„ä»¶å¯¹è±¡æœ€é‡è¦çš„å±æ€§ï¼Œå€¼æ˜¯å¯¹è±¡(å¯ä»¥åŒ…å«å¤šä¸ªæ•°æ®)
                                    ç»„ä»¶è¢«ç§°ä¸ºçŠ¶æ€æœºï¼Œé€šè¿‡æ›´æ–°ç»„ä»¶çš„stateæ¥æ›´æ–°å¯¹åº”çš„é¡µé¢æ˜¾ç¤º(é‡æ–°æ¸²æŸ“ç»„ä»¶)

                                    å·¥å‚æ¨¡å¼å®šä¹‰ç»„ä»¶å’Œes6ç±»å®šä¹‰ç»„ä»¶ï¼Œ è¿™ä¸¤ç§æ–¹å¼ï¼ŒåŒºåˆ«åœ¨äºï¼Œ åªè¦ç»„ä»¶æœ‰çŠ¶æ€çš„æƒ…å†µä¸‹ï¼Œ å·¥å‚æ¨¡å¼æ²¡æœ‰ç”¨ï¼Œåªèƒ½å¤Ÿä½¿ç”¨es6ç±»æ¥å®šä¹‰ç»„ä»¶ï¼Œä½†æ˜¯å·¥å‚æ¨¡å¼çš„æ•ˆç‡æ¯”es6çš„é«˜

                                    2019.12.20 å·update: 
                                            Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚

                        2ã€props

                        3ã€ref 

    */



    //  state
    class MyComponemt extends React.Component {
        // é€šè¿‡constructor åˆå§‹åŒ–çŠ¶æ€
        constructor(props) {
            super(props)  //  é€šè¿‡superå°†props ä¼ é€’åˆ°çˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­ Class ç»„ä»¶åº”è¯¥å§‹ç»ˆä½¿ç”¨ props å‚æ•°æ¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚
            this.state = {
                isLike: false
            }

            // å°†æ–°å¢çš„æ–¹æ³•ä¸­çš„this æŒ‡å‘å¼ºåˆ¶ç»‘å®šä¸ºç»„ä»¶å¯¹è±¡
            // bind æ–¹æ³•è¿”å›æ–°çš„å‡½æ•°
            this.handleClick = this.handleClick.bind(this)
        }

        // è¿™ä¸ªæ˜¯æ–°å¢çš„æ–¹æ³•ï¼Œ this æŒ‡å‘çš„æ˜¯undefined
        handleClick() {
            // è·å–çŠ¶æ€å€¼
            const isLike = !this.state.isLike
            // æ›´æ–°çŠ¶æ€
            this.setState({ isLike })
        }

        // é‡å†™ç»„ä»¶ç±»çš„æ–¹æ³•ï¼Œthis æŒ‡å‘å½“å‰ç»„ä»¶ç±» å¯¹è±¡
        render() {
            // è·å–state çŠ¶æ€å€¼
            const { isLike } = this.state
            return <h1 onClick={this.handleClick}>{isLike ? "ä½ å–œæ¬¢æˆ‘" : "æˆ‘å–œæ¬¢ä½ "}</h1>;
        }
    }
    const element1 = <MyComponemt name="react" />;
    ReactDOM.render(
        element1,
        document.getElementById('root')
    );


    //  props  
    function PersonInfo(props) {
        const data = ['å§“å', 'å¹´é¾„', 'æ€§åˆ«', 'çˆ±å¥½']
        return <ul>
            {
                data.map((item, index) => {
                    return <li key={index}>{item} : {props.props[index]}</li>
                })
            }
        </ul>
    }
    const propsInfo = ['ChaliceLee', '20', 'man', 'dance']
    const element2 = <PersonInfo props={propsInfo} />  // é€šè¿‡props ä¼ é€’ä¸€ä¸ªå¯¹è±¡ï¼Œkeyå€¼æ˜¯props è¿™ä¸ªå¯ä»¥è‡ªå·±å®šä¹‰ï¼Œä½†æ˜¯ä½¿ç”¨çš„æ—¶å€™éœ€è¦å¯¹åº”è¿™ä¸ªå­—æ®µæ¥å–å€¼
    ReactDOM.render(
        element2,
        document.getElementById('root1')
    );



    //  é»˜è®¤props
    function PersonInfo1(props) {
        return <ul>
            <li>å§“åï¼š{props.name} </li>
            <li>å¹´é¾„: {props.age}</li>
            <li>æ€§åˆ«: {props.sex}</li>
        </ul>
    }

    // è®¾ç½®é»˜è®¤å€¼
    PersonInfo1.defaultProps = {
        age: 20,
        sex: 'ç”·'
    }

    const propsInfo1 = {
        name: 'ChaliceLee'
    }

    const element3 = <PersonInfo1 name={propsInfo1.name} />
    ReactDOM.render(
        element3,
        document.getElementById('root2')
    );


    // é™å®šå±æ€§æ˜¯å¦å¿…ä¼ é¡¹å’Œç±»å‹æ§åˆ¶: æ³¨æ„ï¼š æƒ³è¦ä½¿ç”¨æ­¤åŠŸèƒ½å¿…é¡»å¼•å…¥ä¸€ä¸ªåº“ ï¼šhttps://react.docschina.org/docs/typechecking-with-proptypes.html

    function PersonInfo2(props) {
        console.log('%c ğŸ¥ƒ props: ', 'font-size:20px;background-color: #7F2B82;color:#fff;', props);
        return <ul>
            <li>å§“åï¼š{props.name} </li>
            <li>å¹´é¾„: {props.age}</li>
            <li>æ€§åˆ«: {props.sex}</li>
        </ul>
    }

    // è®¾ç½®é»˜è®¤å€¼
    PersonInfo2.defaultProps = {
        age: 20,
        sex: 'ç”·'
    }

    //æŒ‡å®šå±æ€§ç±»å‹ä¸æ˜¯å¦å¿…ä¼ 
    PersonInfo2.propTypes = {   // éœ€è¦å¼•å…¥Prop-typesåº“
        name: PropTypes.string.isRequired
    }



    const propsInfo2 = {
        name: "chalicelee"   //  è¦æ±‚ä¼ å…¥å­—ç¬¦ä¸²æ‰€ä»¥å¿…é¡»ä¼ å…¥å­—ç¬¦ä¸²è€Œä¸”ä¸èƒ½ä¸ºç©º
    }

    const element4 = <PersonInfo2 name={propsInfo2.name} />
    ReactDOM.render(
        element4,
        document.getElementById('root3')
    );


    //  é€šè¿‡ç±»çš„æ–¹å¼æ¥åˆ›å»ºç»„ä»¶
    class PersonInfo3 extends React.Component {

        // åœ¨ç»„ä»¶è¢«åˆ›å»ºçš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨ constructoræ„é€ å‡½æ•°
        constructor(props) {
            super(props)  // è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•
            this.state = {
                a: '....'
            }
        }

        render() {
            console.log(this);
            return <ul>
                <li>å§“åï¼š{this.props.name} </li>
                <li>å¹´é¾„: {this.props.age}</li>
                <li>æ€§åˆ«: {this.props.sex}</li>
            </ul>
        }
    }


    // è®¾ç½®é»˜è®¤å€¼
    PersonInfo3.defaultProps = {
        age: 20,
        sex: 'å¥³'
    }

    //æŒ‡å®šå±æ€§ç±»å‹ä¸æ˜¯å¦å¿…ä¼ 
    PersonInfo3.propTypes = {
        name: PropTypes.string.isRequired
    }



    const propsInfo3 = {
        name: 'ss'
    }

    const element5 = <PersonInfo3 {...propsInfo3} />
    ReactDOM.render(
        element5,
        document.getElementById('root4')
    );




    // refæ“ä½œ å®˜æ–¹ä¸æ¨èä½¿ç”¨
    class MyComponent1 extends React.Component {
        constructor(props) {
            super(props)
            this.showInput = this.showInput.bind(this)
            this.handleBlur = this.handleBlur.bind(this)
        }
        render() {
            return (
                <div>
                    <input type='text' ref='content' />
                    <input type='text' ref={input => {
                        // inputæ˜¯inputçš„domå®ä¾‹
                        this.input = input
                    }} />
                    <button onClick={this.showInput}>æäº¤</button>
                    <input onBlur={this.handleBlur} type='text' placeholder='è¯·è¾“å…¥å€¼' />
                </div>
            )
        }
        showInput() {
            // const input = this.refs.content   // è¿™ç§æ–¹å¼å®˜æ–¹ä¸æ¨èä½¿ç”¨
        
            console.log('%c ğŸ† this.input.value: ', 'font-size:20px;background-color: #4b4b4b;color:#fff;', this.input.value);
        }
        handleBlur(e) {
            alert(e.target.value)
        }
    }
    ReactDOM.render(<MyComponent1 />, document.getElementById('root5'))


    /**
    
        æ€»ç»“: è¿™ä¸‰å¤§ç‰¹æ€§æ¯”è¾ƒé‡è¦: 1. state 2.props 3.ref
    */

</script>